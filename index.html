<!-- index.html -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <!-- <link rel="icon" href="/favicon.ico" type="image/x-icon"> -->

  <title>Fitbit API Example</title>

  <script src="fitbitAuth.js"></script>
  <script src="fitbitApi.js"></script> 
  <script src="planAnalyzerModel.js"></script> 
  <script src="planAnalyzerDisplay.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script> 
  <script src="chartBuilder.js"></script>

</head>
<body onload="init()">
  <button onclick="fitbitDatastore={};localStorage.removeItem('fitbitDatastore')">Clear Fitbit Data</button>
  <button onclick="console.log(fitbitDatastore)">Show Fitbit Data</button>
  <br/>
  <button onclick="authenticateFitbit()">Authenticate</button>
  <button onclick="getProfile()">Get Profile</button>
  <button onclick="getTimeSeriesFitbitData()">Get Fitbit Data</button>
  <br/>
  <br/>
  <label for="duration">Duration (days):</label>
  <input type="number" id="duration" name="duration" min="1" value="1095"> 
  <button onclick="setStartDate()">Set Start Date</button>
  <label for="startDate">Start Date:</label>
  <input type="date" id="startDate" name="startDate">
  <br/>
 <!--  <button onclick="getWeightLogs(getStartDate(), getDuration())">Get Weight Logs</button>
  <button onclick="getFatPercentLogs(getStartDate(), getDuration())">Get Body Fat Percent Logs</button>
  <br/>
  <button onclick="getCaloriesOutLogs(getStartDate(), getDuration())">Get Calories Out Logs</button>
  <button onclick="getAzmLogs(getStartDate(), getDuration())">Get AZM Logs</button>
  <br/>
  <button onclick="getStepLogs(getStartDate(), getDuration())">Get Step Logs</button>
  <button onclick="getDistanceLogs(getStartDate(), getDuration())">Get Distance Logs</button>
  <button onclick="getCaloriesInLogs(getStartDate(), getDuration())">Get Calories In Logs</button> -->
  <br/>
  <p>Set Up and Display Chart<p>
  <br/>
  <label for="period">Period (days):</label>
  <input type="number" id="period" name="period" min="3" value="5"> 
  <button onclick="calculateTimeSeriesDerivedData(getPeriod())">Calculate Body Weight Data</button>
  <button onclick="sortBodyWeightTrends()">Sort Trends</button>
  <br/>
  <label for="startDateCharts">Chart Start Date:</label>
  <input type="date" id="startDateCharts" name="startDateCharts" value="2022-05-02">
  <label for="endDateCharts">Chart End Date:</label>
  <input type="date" id="endDateCharts" name="endDateCharts" value="2022-06-06">
  <button onclick="displayCharts(getStartDateCharts(), getEndDateCharts(), getPeriod())">Display Charts</button>
  <br/>
  <button onclick="getCombinedDates()">Get Combined Dates</button>
  <br/>
  <label for="startDateCharts">Period Mid-Point:</label>
  <input type="date" id="midPeriodDate" name="midPeriodDate" value="2024-01-12">
  <button onclick="getFitbitIntervalData()">Get Fitbit Interval Data</button>
  <br/>
  <button onclick="getMinutesSedentaryLogs(getStartDateFromMidPoint(), getPeriod())">Get Minutes Sedentary Logs</button> 
  <button onclick="getMinutesLightlyActiveLogs(getStartDateFromMidPoint(), getPeriod())">Get Minutes Lightly Active Logs</button>
  <button onclick="getMinutesFairlyActiveLogs(getStartDateFromMidPoint(), getPeriod())">Get Minutes Fairly Active Logs</button>
  <button onclick="getMinutesVeryActiveLogs(getStartDateFromMidPoint(), getPeriod())">Get Minutes Very Active Logs</button>
  <button onclick="getSleepLogs(getStartDateFromMidPoint(), getPeriod())">Get Sleep Logs</button> 
  <br/>
  <p>One day at a time</p>
  <button onclick="getPeriodMacros(expandRange({getMidPoint(),getPeriod()}))">Get Macro Logs</button> <!-- 1 day only -->
  <br/>
  <!-- Add more buttons for other Fitbit APIs as needed -->
  <script>
    function setStartDate() {
      const today = new Date()
      const startDateCalc = new Date(today)
      startDateCalc.setDate(today.getDate() - getDuration()+1);
      const startDateInput = document.getElementById('startDate');
      startDateInput.valueAsDate = startDateCalc;
    }
   setStartDate() 
  </script>

<div id="weightChartArea">
<canvas id="weightChart"></canvas>
</div>
<div id="fatPercentChartArea">
<canvas id="fatPercentChartArea"></canvas>
</div>
<div id="periodData"></div>

</body>
</html>
